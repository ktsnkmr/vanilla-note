{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/adding-pagination/","result":{"data":{"markdownRemark":{"html":"<p>今回の内容－<br>\nトップページが長くなってきたのでページネーションを取り入れる。公式ページに説明がある。フォローページもあり。公式チュートリアルの続き(?)では少し変更も必要だった。追記あり。<!-- end --></p>\n<h2 id=\"gatsbyjs-公式の-adding-pagination\">GatsbyJS 公式の Adding Pagination</h2>\n<p>Adding Pagination<br>\n<a href=\"https://www.gatsbyjs.com/docs/adding-pagination/\">https://www.gatsbyjs.com/docs/adding-pagination/</a></p>\n<p>このページの説明だけでは完成しないが進めていく。</p>\n<h3 id=\"srctemplatesindex-listjs-として作成\">src/templates/index-list.js として作成</h3>\n<p>長くなるがほぼ全部、下の方にコードあり。</p>\n<h3 id=\"ページを分割して生成できるようにする\">ページを分割して生成できるようにする</h3>\n<p>gatsby-node.js に追加。<br>\nblog-post、tag の追加時のコードも含まれる。</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"js\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">//create node slug</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">path</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">require</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`</span><span class=\"mtk4\">path</span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createFilePath</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">require</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`</span><span class=\"mtk4\">gatsby-source-filesystem</span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">exports</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">onCreateNode</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">({</span><span class=\"mtk1\"> </span><span class=\"mtk7\">node</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getNode</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">actions</span><span class=\"mtk1\"> </span><span class=\"mtk6\">})</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createNodeField</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">actions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">node</span><span class=\"mtk6\">.</span><span class=\"mtk7\">internal</span><span class=\"mtk6\">.</span><span class=\"mtk7\">type</span><span class=\"mtk1\"> </span><span class=\"mtk6\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`</span><span class=\"mtk4\">MarkdownRemark</span><span class=\"mtk6\">`</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">slug</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">createFilePath</span><span class=\"mtk1\">(</span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">node</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">getNode</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> basePath</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`</span><span class=\"mtk4\">pages</span><span class=\"mtk6\">`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtkb\">createNodeField</span><span class=\"mtk1\">(</span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">node</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      name</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`</span><span class=\"mtk4\">slug</span><span class=\"mtk6\">`,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      value</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">slug</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3 mtki\">//blog-post tags-post</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">_</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">require</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">lodash</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">exports</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">createPages</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">async</span><span class=\"mtk1\"> </span><span class=\"mtk6\">({</span><span class=\"mtk1\"> </span><span class=\"mtk7\">actions</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">graphql</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">reporter</span><span class=\"mtk1\"> </span><span class=\"mtk6\">})</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">createPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">actions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">blogPostTemplate</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">path</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">./src/templates/blog-post.js</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">tagTemplate</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">path</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">./src/templates/tags-post.js</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">indexTemplate</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">path</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">resolve</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">./src/templates/index-list.js</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk3 mtki\">//追加</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk10\">await</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">graphql</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      postsRemark: allMarkdownRemark(limit: 2000) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        edges {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          node {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            fields {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">              slug</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            frontmatter {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">              tags</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      tagsGroup: allMarkdownRemark(limit: 2000) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        group(field: frontmatter___tags) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          fieldValue</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      #追加</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      pagesList: allMarkdownRemark(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        sort: { fields: [frontmatter___date], order: DESC }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        limit: 2000</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        edges {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          node {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            fields {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">              slug</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">  </span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">  </span><span class=\"mtk3 mtki\">// handle errors</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">result</span><span class=\"mtk6\">.</span><span class=\"mtk7\">errors</span><span class=\"mtk1\">) </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">reporter</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">panicOnBuild</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`</span><span class=\"mtk4\">Error while running GraphQL query.</span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">  </span><span class=\"mtk3 mtki\">// Create blog-post pages</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">posts</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">.</span><span class=\"mtk7\">data</span><span class=\"mtk6\">.</span><span class=\"mtk7\">postsRemark</span><span class=\"mtk6\">.</span><span class=\"mtk7\">edges</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">posts</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk6\">({</span><span class=\"mtk1\"> </span><span class=\"mtk7\">node</span><span class=\"mtk1\"> </span><span class=\"mtk6\">})</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtkb\">createPage</span><span class=\"mtk1\">(</span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      path</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">node</span><span class=\"mtk6\">.</span><span class=\"mtk7\">fields</span><span class=\"mtk6\">.</span><span class=\"mtk7\">slug</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      component</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">blogPostTemplate</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">        </span><span class=\"mtk3 mtki\">// Data passed to context is available</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">        </span><span class=\"mtk3 mtki\">// in page queries as GraphQL variables.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        slug</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">node</span><span class=\"mtk6\">.</span><span class=\"mtk7\">fields</span><span class=\"mtk6\">.</span><span class=\"mtk7\">slug</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">  </span><span class=\"mtk3 mtki\">// Create tag-post pages</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">tags</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">.</span><span class=\"mtk7\">data</span><span class=\"mtk6\">.</span><span class=\"mtk7\">tagsGroup</span><span class=\"mtk6\">.</span><span class=\"mtk7\">group</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">tags</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk7\">tag</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtkb\">createPage</span><span class=\"mtk1\">(</span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      path</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`</span><span class=\"mtk4\">/tags/</span><span class=\"mtk6\">${</span><span class=\"mtk7\">_</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">kebabCase</span><span class=\"mtk1\">(</span><span class=\"mtk7\">tag</span><span class=\"mtk6\">.</span><span class=\"mtk7\">fieldValue</span><span class=\"mtk1\">)</span><span class=\"mtk6\">}</span><span class=\"mtk4\">/</span><span class=\"mtk6\">`,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      component</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">tagTemplate</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        tag</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">tag</span><span class=\"mtk6\">.</span><span class=\"mtk7\">fieldValue</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">  </span><span class=\"mtk3 mtki\">// Create index-list pages 追加</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">lists</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">result</span><span class=\"mtk6\">.</span><span class=\"mtk7\">data</span><span class=\"mtk6\">.</span><span class=\"mtk7\">pagesList</span><span class=\"mtk6\">.</span><span class=\"mtk7\">edges</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">postsPerPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">5</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">numPages</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">Math</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">ceil</span><span class=\"mtk1\">(</span><span class=\"mtk7\">lists</span><span class=\"mtk6\">.</span><span class=\"mtk7\">length</span><span class=\"mtk1\"> </span><span class=\"mtk6\">/</span><span class=\"mtk1\"> </span><span class=\"mtk7\">postsPerPage</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7 mtkb\">Array</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">from</span><span class=\"mtk1\">(</span><span class=\"mtk6\">{</span><span class=\"mtk1\"> length</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">numPages</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk6\">(</span><span class=\"mtk7\">_</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk6\">)</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtkb\">createPage</span><span class=\"mtk1\">(</span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      path</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">===</span><span class=\"mtk1\"> </span><span class=\"mtk5\">0</span><span class=\"mtk1\"> </span><span class=\"mtk6\">?</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`</span><span class=\"mtk4\">/</span><span class=\"mtk6\">`</span><span class=\"mtk1\"> </span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`</span><span class=\"mtk4\">/page/</span><span class=\"mtk6\">${</span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">}`,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      component</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">indexTemplate</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        limit</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">postsPerPage</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        skip</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">*</span><span class=\"mtk1\"> </span><span class=\"mtk7\">postsPerPage</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">numPages</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        currentPage</span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">i</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk6\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk6\">},</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">}</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>GatsbyJS サイトにタグ一覧、各タグ記事一覧ページを追加の記事<br>\n<a href=\"https://vanilla-note.com/posts/creating-tags-pages/\">https://vanilla-note.com/posts/creating-tags-pages/</a></p>\n<p>公式 createPage のパラメーター、context のこと<br>\n<a href=\"https://www.gatsbyjs.com/docs/reference/config-files/actions/#createPage\">https://www.gatsbyjs.com/docs/reference/config-files/actions/#createPage</a></p>\n<p><em>＜メモ＞</em><br>\n公式を参考に追加。<br>\ntag ページを追加していれば、公式とフォローページを見ればおおよそ理解できる。<br>\nいままでのチュートリアルの流れで作成してきていると、定数 posts が重なるかも。適宜変更。<br>\nトップページを分割するので、/blog/とはせず、/page/とした。</p>\n<h2 id=\"フォローぺージ-pagination-in-gatsbyjs\">フォローぺージ Pagination in GatsbyJS</h2>\n<p>Pagination in GatsbyJS<br>\n<a href=\"https://nickymeuleman.netlify.app/blog/gatsby-pagination\">https://nickymeuleman.netlify.app/blog/gatsby-pagination</a></p>\n<p>こちらのフォローページを活用させてもらう。<br>\n分割したページへのリンクを作成する。</p>\n<h3 id=\"index-listjs-の-graphql-に追加\">index-list.js の graphql に追加</h3>\n<p>createPage した時の context を pageContext で受け取っているので、クエリに追加して活用する。</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"js\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">pageQuery</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">graphql</span><span class=\"mtk6\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">  query HomeQuery($skip: Int!, $limit: Int!) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    allMarkdownRemark(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      sort: { fields: [frontmatter___date], order: DESC }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      limit: $limit #追加</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      skip: $skip #追加</span></span></span></code></pre>\n<h3 id=\"index-listjs-に前へ、次へのリンクを作成\">index-list.js に前へ、次へのリンクを作成</h3>\n<p>以下のフォローページのままだと、２ページ目から相対パスでおかしくなる。</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"js\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">!</span><span class=\"mtk7\">isFirst</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&amp;&amp;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk20\">&lt;</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">to</span><span class=\"mtk6\">={</span><span class=\"mtk7\">prevPage</span><span class=\"mtk6\">}</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">rel</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">prev</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">      ← Previous Page</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">    </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">!</span><span class=\"mtk7\">isLast</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&amp;&amp;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk20\">&lt;</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">to</span><span class=\"mtk6\">={</span><span class=\"mtk7\">nextPage</span><span class=\"mtk6\">}</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">rel</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">next</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">      Next Page →</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">    </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span></code></pre>\n<p>gatsby-starter-blog<br>\n<a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">https://github.com/gatsbyjs/gatsby-starter-blog</a></p>\n<p>上記のフォローページは<em>gatsby-starter-blog</em>が前提のコードかも。</p>\n<p>このサイトは<strong>gatsby-starter-hello-world</strong>がベース。<br>\n<a href=\"https://vanilla-note.com/posts/start-gatsby-1/#gatsby-%E3%81%AE%E3%82%B9%E3%82%BF%E3%83%BC%E3%82%BF%E3%83%BC%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB\">https://vanilla-note.com/posts/start-gatsby-1/</a></p>\n<h2 id=\"srctemplatesindex-listjs\">src/templates/index-list.js</h2>\n<p>長くなるがほぼ全部。フォローページのコードも含む。</p>\n<pre class=\"grvsc-container quiet-light\" data-language=\"js\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">React</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">react</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">graphql</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Link</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">gatsby</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">css</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">@emotion/react</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Layout</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">../components/layout</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">import</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Seo</span><span class=\"mtk1\"> </span><span class=\"mtk10\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">../components/seo</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">Home</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">({</span><span class=\"mtk1\"> </span><span class=\"mtk7\">data</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">pageContext</span><span class=\"mtk1\"> </span><span class=\"mtk6\">})</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">post</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">data</span><span class=\"mtk6\">.</span><span class=\"mtk7\">allMarkdownRemark</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk6\">{</span><span class=\"mtk1\"> </span><span class=\"mtk7\">currentPage</span><span class=\"mtk6\">,</span><span class=\"mtk1\"> </span><span class=\"mtk7\">numPages</span><span class=\"mtk1\"> </span><span class=\"mtk6\">}</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">pageContext</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">isFirst</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">currentPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">===</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">isLast</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">currentPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">===</span><span class=\"mtk1\"> </span><span class=\"mtk7\">numPages</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">prevPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">currentPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">-</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">===</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\"> </span><span class=\"mtk6\">?</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">/</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">:</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">currentPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">-</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">)</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">nextPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk7\">currentPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">+</span><span class=\"mtk1\"> </span><span class=\"mtk5\">1</span><span class=\"mtk1\">)</span><span class=\"mtk6\">.</span><span class=\"mtk9 mtkb\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">prevPath</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">prevPage</span><span class=\"mtk1\"> </span><span class=\"mtk6\">===</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">/</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">?</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk6\">:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">/page/</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">nextPath</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">/page/</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk20\">&lt;</span><span class=\"mtk7 mtkb\">Layout</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">      </span><span class=\"mtk6\">{</span><span class=\"mtk3 mtki\">/* 省略 */</span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">      </span><span class=\"mtk6\">{!</span><span class=\"mtk7\">isFirst</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&amp;&amp;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk20\">&lt;</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">to</span><span class=\"mtk6\">={`${</span><span class=\"mtk7\">prevPath</span><span class=\"mtk6\">}${</span><span class=\"mtk7\">prevPage</span><span class=\"mtk6\">}`}</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">rel</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">prev</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">          ← Prev</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">        </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      )</span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">      </span><span class=\"mtk6\">{!</span><span class=\"mtk7\">isLast</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&amp;&amp;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk20\">&lt;</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">to</span><span class=\"mtk6\">={`${</span><span class=\"mtk7\">nextPath</span><span class=\"mtk6\">}${</span><span class=\"mtk7\">nextPage</span><span class=\"mtk6\">}`}</span><span class=\"mtk20\"> </span><span class=\"mtk11 mtki\">rel</span><span class=\"mtk6\">=&quot;</span><span class=\"mtk4\">next</span><span class=\"mtk6\">&quot;</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">          Next →</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">        </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk7 mtkb\">Link</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      )</span><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk19\">    </span><span class=\"mtk20\">&lt;/</span><span class=\"mtk7 mtkb\">Layout</span><span class=\"mtk20\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">const</span><span class=\"mtk1\"> </span><span class=\"mtk7\">pageQuery</span><span class=\"mtk1\"> </span><span class=\"mtk6\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtkb\">graphql</span><span class=\"mtk6\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">  query HomeQuery($skip: Int!, $limit: Int!) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    allMarkdownRemark(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      sort: { fields: [frontmatter___date], order: DESC }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      limit: $limit #追加</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      skip: $skip #追加</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    ) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      totalCount</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      edges {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        node {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          fields {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            slug</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          frontmatter {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">            date(formatString: &quot;YYYY.MM.DD&quot;)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">          excerpt(pruneLength: 150)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk6\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">export</span><span class=\"mtk1\"> </span><span class=\"mtk10\">default</span><span class=\"mtk1\"> </span><span class=\"mtk7\">Home</span></span></span></code></pre>\n<p><em>＜メモ＞</em><br>\n追記。このページも参考になる。</p>\n<p>Gatsby-paginate<br>\n<a href=\"https://www.gatsbyjs.com/plugins/gatsby-paginate/\">https://www.gatsbyjs.com/plugins/gatsby-paginate/</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .quiet-light { background-color: #F5F5F5; }\n  .quiet-light .mtkb { font-weight: bold; }\n  .quiet-light .mtki { font-style: italic; }\n  .quiet-light .mtk3 { color: #AAAAAA; }\n  .quiet-light .mtk7 { color: #7A3E9D; }\n  .quiet-light .mtk1 { color: #333333; }\n  .quiet-light .mtk6 { color: #777777; }\n  .quiet-light .mtk9 { color: #AA3731; }\n  .quiet-light .mtk4 { color: #448C27; }\n  .quiet-light .mtk10 { color: #4B69C6; }\n  .quiet-light .mtk5 { color: #9C5D27; }\n  .quiet-light .mtk20 { color: #91B3E0; }\n  .quiet-light .mtk11 { color: #8190A0; }\n  .quiet-light .mtk19 { color: #333333FF; }\n  .quiet-light .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(0, 0, 0, 0.05));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(0, 0, 0, 0.2));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/posts/adding-pagination/#gatsbyjs-%E5%85%AC%E5%BC%8F%E3%81%AE-adding-pagination\">GatsbyJS 公式の Adding Pagination</a></p>\n<ul>\n<li><a href=\"/posts/adding-pagination/#srctemplatesindex-listjs-%E3%81%A8%E3%81%97%E3%81%A6%E4%BD%9C%E6%88%90\">src/templates/index-list.js として作成</a></li>\n<li><a href=\"/posts/adding-pagination/#%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E5%88%86%E5%89%B2%E3%81%97%E3%81%A6%E7%94%9F%E6%88%90%E3%81%A7%E3%81%8D%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B\">ページを分割して生成できるようにする</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/posts/adding-pagination/#%E3%83%95%E3%82%A9%E3%83%AD%E3%83%BC%E3%81%BA%E3%83%BC%E3%82%B8-pagination-in-gatsbyjs\">フォローぺージ Pagination in GatsbyJS</a></p>\n<ul>\n<li><a href=\"/posts/adding-pagination/#index-listjs-%E3%81%AE-graphql-%E3%81%AB%E8%BF%BD%E5%8A%A0\">index-list.js の graphql に追加</a></li>\n<li><a href=\"/posts/adding-pagination/#index-listjs-%E3%81%AB%E5%89%8D%E3%81%B8%E3%80%81%E6%AC%A1%E3%81%B8%E3%81%AE%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E4%BD%9C%E6%88%90\">index-list.js に前へ、次へのリンクを作成</a></li>\n</ul>\n</li>\n<li><a href=\"/posts/adding-pagination/#srctemplatesindex-listjs\">src/templates/index-list.js</a></li>\n</ul>","timeToRead":4,"frontmatter":{"title":"gatsbyJSサイトにページネーションを追加する","date":"2021.03.07","topImage":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwklEQVQI102PuwqEMBRE/f8P0SaNvSAGRAsFCfjAKNv4joooPlA0O7vb7C0Cycw9M1G2bZvn+TxPIcSyLEVR+L7POe+6bhgGSHVd44Q6TRPMSZLgKqV8nkcJwzBN0+M4HMdpmgZyEAS2bYPStq2u64QQVVU9z8NalmV5noOyruu+7wqlFCGGYWiahsBxHMFijFmWhfeqqsqyfH3HdV3kQ43juO/7T7JpmlEUYQclwUZJVLrvGx+Rf3NdFwIB+jnBgucNMaDVW8zdNvkAAAAASUVORK5CYII=","aspectRatio":4.571428571428571,"src":"/static/0584d944edc33778108153a6574cd9a9/f3dec/2021-03-07.png","srcSet":"/static/0584d944edc33778108153a6574cd9a9/e43a9/2021-03-07.png 160w,\n/static/0584d944edc33778108153a6574cd9a9/dd5bb/2021-03-07.png 320w,\n/static/0584d944edc33778108153a6574cd9a9/f3dec/2021-03-07.png 640w,\n/static/0584d944edc33778108153a6574cd9a9/40ffe/2021-03-07.png 960w,\n/static/0584d944edc33778108153a6574cd9a9/e4d72/2021-03-07.png 1280w","srcWebp":"/static/0584d944edc33778108153a6574cd9a9/991d2/2021-03-07.webp","srcSetWebp":"/static/0584d944edc33778108153a6574cd9a9/578e8/2021-03-07.webp 160w,\n/static/0584d944edc33778108153a6574cd9a9/8dbf3/2021-03-07.webp 320w,\n/static/0584d944edc33778108153a6574cd9a9/991d2/2021-03-07.webp 640w,\n/static/0584d944edc33778108153a6574cd9a9/1fb14/2021-03-07.webp 960w,\n/static/0584d944edc33778108153a6574cd9a9/135cd/2021-03-07.webp 1280w","sizes":"(max-width: 640px) 100vw, 640px"}}}},"excerpt":"今回の内容－ トップページが長くなってきたのでページネーションを取り入れる。公式ページに説明がある。フォローページもあり。公式チュートリアルの続き(?)では少し変更も必要だった。追記あり。","fields":{"slug":"/posts/adding-pagination/"}},"site":{"siteMetadata":{"siteUrl":"https://vanilla-note.com","twitterUsername":"ktsnkmr"}}},"pageContext":{"slug":"/posts/adding-pagination/"}},"staticQueryHashes":["1032900922","3159585216","3159585216"]}